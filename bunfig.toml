[test]
# Preload test setup to configure jsdom and DOM globals
preload = ["./packages/ui/src/test-setup.ts"]

# Exclude test setup files and test files from coverage
coveragePathIgnorePatterns = [
  "**/test-setup.ts",
  "**/*.test.ts",
  "**/*.spec.ts",
  "**/*.test.tsx",
  "**/*.spec.tsx",
  "**/*.function.ts"  # TanStack React Start server function wrappers (not unit testable)
]

# Exclude E2E tests from unit test runner (they use Playwright)
# Exclude integration tests that require database connection (now in e2e/integration/)
# Exclude framework wrapper files (not unit testable - TanStack React Start createServerFn)
testPathIgnorePatterns = [
  "**/e2e/**"
]

# Coverage thresholds to maintain code quality
[test.coverageThreshold]
lines = 95
functions = 95
branches = 90

[test.coverageThreshold."@vamsa/lib"]
lines = 98.82       # Current: 98.82%
functions = 98.12   # Current: 98.12%
branches = 95

[test.coverageThreshold."@vamsa/ui"]
lines = 100         # Current: 100%
functions = 100     # Current: 100%
branches = 100
