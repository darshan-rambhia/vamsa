# ============================================
# DATABASE
# ============================================
DATABASE_URL="postgresql://vamsa:password@localhost:5432/vamsa"
# SQLite alternative (uncomment to use)
# DATABASE_URL="file:./data/familytree.db"

# Connection Pool Configuration (optional, sensible defaults provided)
# DB_POOL_MAX: Maximum concurrent connections (default: 10 production, 5 development)
# DB_POOL_MIN: Minimum idle connections to keep warm (default: 2 production, 1 development)
# DB_POOL_IDLE_TIMEOUT: Close idle connections after this time in ms (default: 30000)
# DB_POOL_CONNECTION_TIMEOUT: Fail if connection can't be established in ms (default: 10000)
#
# Example for high-traffic production:
# DB_POOL_MAX=20
# DB_POOL_MIN=5
# DB_POOL_IDLE_TIMEOUT=60000
# DB_POOL_CONNECTION_TIMEOUT=5000

# ============================================
# AUTHENTICATION
# ============================================
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-secret-key-change-in-production"
NEXTAUTH_URL="http://localhost:3000"

# Better Auth (New authentication framework - Phase 1 migration)
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET="your-32-character-secret-here-change-in-production"
BETTER_AUTH_URL="http://localhost:3000"

# Initial Admin (required for first run)
ADMIN_EMAIL="admin@vamsa.local"
# Leave empty to auto-generate and print to logs
ADMIN_PASSWORD="admin123"

# ============================================
# OAUTH/SSO PROVIDERS (all optional)
# ============================================

# Google OAuth (https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# Microsoft OAuth (https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps)
MICROSOFT_CLIENT_ID=""
MICROSOFT_CLIENT_SECRET=""
MICROSOFT_TENANT_ID="common"  # or specific tenant ID

# GitHub OAuth (https://github.com/settings/developers)
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""

# App URL for OAuth callbacks (must match registered redirect URIs)
APP_URL="http://localhost:3000"

# Self-hosted OIDC Provider (Authentik, Keycloak, etc. - optional for Better Auth)
# Leave empty to disable OIDC
OIDC_DISCOVERY_URL=""
OIDC_CLIENT_ID=""
OIDC_CLIENT_SECRET=""

# ============================================
# STORAGE
# ============================================
STORAGE_PROVIDER="local"
STORAGE_LOCAL_PATH="./data/uploads"

# S3 Configuration (when STORAGE_PROVIDER=s3)
S3_ENDPOINT=""
S3_BUCKET="photos"
S3_ACCESS_KEY=""
S3_SECRET_KEY=""
S3_REGION="us-east-1"

# ============================================
# APP CONFIGURATION
# ============================================
NEXT_PUBLIC_APP_NAME="Vamsa"
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ============================================
# OPENTELEMETRY CONFIGURATION
# ============================================
# Enable/disable OpenTelemetry (default: true)
OTEL_ENABLED=true
# OTLP endpoint for traces and metrics (e.g., Jaeger, Grafana Tempo)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# Service name for tracing
OTEL_SERVICE_NAME=vamsa-web
# Application version for metrics/traces
APP_VERSION=1.0.0
# Environment for metrics tagging
ENVIRONMENT=development

# ============================================
# OBSERVABILITY STACK (Docker)
# ============================================
# Grafana admin password (default: admin)
GRAFANA_PASSWORD=admin
# Prometheus URL for in-app metrics page
PROMETHEUS_URL=http://localhost:9090
# Grafana URL for external links
GRAFANA_URL=http://localhost:3001
# Alertmanager URL for alert management
ALERTMANAGER_URL=http://localhost:9093

# ============================================
# ALERTING CONFIGURATION
# ============================================
# Slack webhook URL for alert notifications
# Create at: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email alerting (optional)
# SMTP configuration for sending email alerts
SMTP_USERNAME=alerts@example.com
SMTP_PASSWORD=your-smtp-password
ALERT_EMAIL=team@example.com

# ============================================
# DOCKER CONFIGURATION
# ============================================
# Used by docker-compose.yml for production deployment

# Database container settings
DB_USER=vamsa
DB_PASSWORD=vamsa_dev_password_CHANGE_THIS
DB_NAME=vamsa
DB_PORT=5432

# Application container settings
SESSION_SECRET=your_session_secret_CHANGE_THIS_TO_RANDOM_STRING
NODE_ENV=production

# nginx container settings
NGINX_PORT=80
