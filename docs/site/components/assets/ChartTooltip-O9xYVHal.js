import{g as de,r as ee,j as h}from"./index-B-j1UC9_.js";import{c as q,B as te}from"./nav-CtgBGWHp.js";function me(s){if(!s||s.trim()==="")return null;const b=s.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(b){const[,u,C,j]=b,O=parseInt(u),y=parseInt(C),z=parseInt(j),k=y>=1&&y<=12,m=z>=1&&z<=31;if(!k||!m)return null;const c=new Date(Date.UTC(O,y-1,z));return c.getUTCFullYear()===O&&c.getUTCMonth()===y-1&&c.getUTCDate()===z?c:null}const o=new Date(s);return isNaN(o.getTime())?null:o}function re(s){if(!s)return"";let b;if(typeof s=="string"){const o=me(s);if(!o)return"";b=o}else b=s;return b.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}function he(s,b){if(!s)return null;const o=b||new Date,u=s.getUTCFullYear(),C=s.getUTCMonth(),j=s.getUTCDate(),O=o.getUTCFullYear(),y=o.getUTCMonth(),z=o.getUTCDate();let k=O-u;const m=y-C;return(m<0||m===0&&z<j)&&(k=k-1),k}var A={exports:{}},W,ne;function be(){if(ne)return W;ne=1;function s(o){try{return JSON.stringify(o)}catch{return'"[Circular]"'}}W=b;function b(o,u,C){var j=C&&C.stringify||s,O=1;if(typeof o=="object"&&o!==null){var y=u.length+O;if(y===1)return o;var z=new Array(y);z[0]=j(o);for(var k=1;k<y;k++)z[k]=j(u[k]);return z.join(" ")}if(typeof o!="string")return o;var m=u.length;if(m===0)return o;for(var c="",g=1-O,f=-1,p=o&&o.length||0,i=0;i<p;){if(o.charCodeAt(i)===37&&i+1<p){switch(f=f>-1?f:0,o.charCodeAt(i+1)){case 100:case 102:if(g>=m||u[g]==null)break;f<i&&(c+=o.slice(f,i)),c+=Number(u[g]),f=i+2,i++;break;case 105:if(g>=m||u[g]==null)break;f<i&&(c+=o.slice(f,i)),c+=Math.floor(Number(u[g])),f=i+2,i++;break;case 79:case 111:case 106:if(g>=m||u[g]===void 0)break;f<i&&(c+=o.slice(f,i));var S=typeof u[g];if(S==="string"){c+="'"+u[g]+"'",f=i+2,i++;break}if(S==="function"){c+=u[g].name||"<anonymous>",f=i+2,i++;break}c+=j(u[g]),f=i+2,i++;break;case 115:if(g>=m)break;f<i&&(c+=o.slice(f,i)),c+=String(u[g]),f=i+2,i++;break;case 37:f<i&&(c+=o.slice(f,i)),c+="%",f=i+2,i++,g--;break}++g}++i}return f===-1?o:(f<p&&(c+=o.slice(f)),c)}return W}var se;function ge(){if(se)return A.exports;se=1;const s=be();A.exports=m;const b=fe().console||{},o={mapHttpRequest:I,mapHttpResponse:I,wrapRequestSerializer:R,wrapResponseSerializer:R,wrapErrorSerializer:R,req:I,res:I,err:H,errWithCause:H};function u(e,t){return e==="silent"?1/0:t.levels.values[e]}const C=Symbol("pino.logFuncs"),j=Symbol("pino.hierarchy"),O={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function y(e,t){const n={logger:t,parent:e[j]};t[j]=n}function z(e,t,n){const a={};t.forEach(l=>{a[l]=n[l]?n[l]:b[l]||b[O[l]||"log"]||D}),e[C]=a}function k(e,t){return Array.isArray(e)?e.filter(function(a){return a!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function m(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||b;e.browser.write&&(e.browser.asObject=!0);const a=e.serializers||{},l=k(e.browser.serialize,a);let x=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(x=!1);const N=Object.keys(e.customLevels||{}),d=["error","fatal","warn","info","debug","trace"].concat(N);typeof n=="function"&&d.forEach(function(L){n[L]=n}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const E=e.level||"info",r=Object.create(n);r.log||(r.log=D),z(r,d,n),y({},r),Object.defineProperty(r,"levelVal",{get:v}),Object.defineProperty(r,"level",{get:T,set:P});const w={transmit:t,serialize:l,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,reportCaller:e.browser.reportCaller,levels:d,timestamp:oe(e),messageKey:e.messageKey||"msg",onChild:e.onChild||D};r.levels=c(e),r.level=E,r.isLevelEnabled=function(L){return this.levels.values[L]?this.levels.values[L]>=this.levels.values[this.level]:!1},r.setMaxListeners=r.getMaxListeners=r.emit=r.addListener=r.on=r.prependListener=r.once=r.prependOnceListener=r.removeListener=r.removeAllListeners=r.listeners=r.listenerCount=r.eventNames=r.write=r.flush=D,r.serializers=a,r._serialize=l,r._stdErrSerialize=x,r.child=function(...L){return J.call(this,w,...L)},t&&(r._logEvent=$());function v(){return u(this.level,this)}function T(){return this._level}function P(L){if(L!=="silent"&&!this.levels.values[L])throw Error("unknown level "+L);this._level=L,p(this,w,r,"error"),p(this,w,r,"fatal"),p(this,w,r,"warn"),p(this,w,r,"info"),p(this,w,r,"debug"),p(this,w,r,"trace"),N.forEach(_=>{p(this,w,r,_)})}function J(L,_,F){if(!_)throw new Error("missing bindings for child Pino");F=F||{},l&&_.serializers&&(F.serializers=_.serializers);const Q=F.serializers;if(l&&Q){var V=Object.assign({},a,Q),Z=e.browser.serialize===!0?Object.keys(V):l;delete _.serializers,M([_],Z,V,this._stdErrSerialize)}function X(B){this._childLevel=(B._childLevel|0)+1,this.bindings=_,V&&(this.serializers=V,this._serialize=Z),t&&(this._logEvent=$([].concat(B._logEvent.bindings,_)))}X.prototype=this;const U=new X(this);return y(this,U),U.child=function(...B){return J.call(this,L,...B)},U.level=F.level||this.level,L.onChild(U),U}return r}function c(e){const t=e.customLevels||{},n=Object.assign({},m.levels.values,t),a=Object.assign({},m.levels.labels,g(t));return{values:n,labels:a}}function g(e){const t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}m.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},m.stdSerializers=o,m.stdTimeFunctions=Object.assign({},{nullTime:G,epochTime:Y,unixTime:ce,isoTime:ue});function f(e){const t=[];e.bindings&&t.push(e.bindings);let n=e[j];for(;n.parent;)n=n.parent,n.logger.bindings&&t.push(n.logger.bindings);return t.reverse()}function p(e,t,n,a){if(Object.defineProperty(e,a,{value:u(e.level,n)>u(a,n)?D:n[C][a],writable:!0,enumerable:!0,configurable:!0}),e[a]===D){if(!t.transmit)return;const x=t.transmit.level||e.level,N=u(x,n);if(u(a,n)<N)return}e[a]=S(e,t,n,a);const l=f(e);l.length!==0&&(e[a]=i(l,e[a]))}function i(e,t){return function(){return t.apply(this,[...e,...arguments])}}function S(e,t,n,a){return(function(l){return function(){const N=t.timestamp(),d=new Array(arguments.length),E=Object.getPrototypeOf&&Object.getPrototypeOf(this)===b?b:this;for(var r=0;r<d.length;r++)d[r]=arguments[r];var w=!1;if(t.serialize&&(M(d,this._serialize,this.serializers,this._stdErrSerialize),w=!0),t.asObject||t.formatters){const v=ae(this,a,d,N,t);if(t.reportCaller&&v&&v.length>0&&v[0]&&typeof v[0]=="object")try{const T=K();T&&(v[0].caller=T)}catch{}l.call(E,...v)}else{if(t.reportCaller)try{const v=K();v&&d.push(v)}catch{}l.apply(E,d)}if(t.transmit){const v=t.transmit.level||e._level,T=u(v,n),P=u(a,n);if(P<T)return;le(this,{ts:N,methodLevel:a,methodValue:P,transmitValue:n.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:u(e._level,n)},d,w)}}})(e[C][a])}function ae(e,t,n,a,l){const{level:x,log:N=v=>v}=l.formatters||{},d=n.slice();let E=d[0];const r={};let w=(e._childLevel|0)+1;if(w<1&&(w=1),a&&(r.time=a),x){const v=x(t,e.levels.values[t]);Object.assign(r,v)}else r.level=e.levels.values[t];if(l.asObjectBindingsOnly){if(E!==null&&typeof E=="object")for(;w--&&typeof d[0]=="object";)Object.assign(r,d.shift());return[N(r),...d]}else{if(E!==null&&typeof E=="object"){for(;w--&&typeof d[0]=="object";)Object.assign(r,d.shift());E=d.length?s(d.shift(),d):void 0}else typeof E=="string"&&(E=s(d.shift(),d));return E!==void 0&&(r[l.messageKey]=E),[N(r)]}}function M(e,t,n,a){for(const l in e)if(a&&e[l]instanceof Error)e[l]=m.stdSerializers.err(e[l]);else if(typeof e[l]=="object"&&!Array.isArray(e[l])&&t)for(const x in e[l])t.indexOf(x)>-1&&x in n&&(e[l][x]=n[x](e[l][x]))}function le(e,t,n,a=!1){const l=t.send,x=t.ts,N=t.methodLevel,d=t.methodValue,E=t.val,r=e._logEvent.bindings;a||M(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=x,e._logEvent.messages=n.filter(function(w){return r.indexOf(w)===-1}),e._logEvent.level.label=N,e._logEvent.level.value=d,l(N,e._logEvent,E),e._logEvent=$(r)}function $(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function H(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function oe(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?G:Y}function I(){return{}}function R(e){return e}function D(){}function G(){return!1}function Y(){return Date.now()}function ce(){return Math.round(Date.now()/1e3)}function ue(){return new Date(Date.now()).toISOString()}function fe(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}A.exports.default=m,A.exports.pino=m;function K(){const e=new Error().stack;if(!e)return null;const t=e.split(`
`);for(let n=1;n<t.length;n++){const a=t[n].trim();if(/(^at\s+)?(createWrap|LOG|set\s*\(|asObject|Object\.apply|Function\.apply)/.test(a)||a.indexOf("browser.js")!==-1||a.indexOf("node:internal")!==-1||a.indexOf("node_modules")!==-1)continue;let l=a.match(/\((.*?):(\d+):(\d+)\)/);if(l||(l=a.match(/at\s+(.*?):(\d+):(\d+)/)),l){const x=l[1],N=l[2],d=l[3];return x+":"+N+":"+d}}return null}return A.exports}var ve=ge();const ie=de(ve);var pe={};const ye=void 0;ie({level:pe.LOG_LEVEL||"info",redact:{paths:["password","passwordHash","token","accessToken","refreshToken","apiKey","secret","authorization","credentials"],remove:!0},timestamp:ie.stdTimeFunctions.isoTime},ye);const xe={sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-14 w-14 text-lg",xl:"h-24 w-24 text-2xl"};function we({mediaId:s,alt:b,fallbackInitials:o,size:u="md",className:C,thumbnailPath:j,webpPath:O,filePath:y}){const[z,k]=ee.useState(!1),[m,c]=ee.useState(!1),g=j?`/${j}`:O?`/${O}`:y||null,f=o||b.split(" ").map(i=>i.charAt(0)).slice(0,2).join("").toUpperCase()||"?",p=g&&!z;return h.jsx("div",{className:q("relative inline-flex shrink-0 items-center justify-center overflow-hidden rounded-full","bg-primary/10 text-primary font-display font-medium","ring-border ring-offset-background ring-2 ring-offset-2",xe[u],C),children:p?h.jsx("img",{src:g,alt:b,loading:"lazy",decoding:"async",onLoad:()=>c(!0),onError:()=>k(!0),className:q("h-full w-full object-cover transition-opacity duration-300",!m&&"opacity-0",m&&"opacity-100")}):h.jsx("span",{className:"select-none",children:f})})}function ze({node:s,position:b,rootPersonId:o,onSetAsCenter:u,onViewProfile:C,relationshipLabel:j}){const O=he(s.dateOfBirth?new Date(s.dateOfBirth):null,s.dateOfPassing?new Date(s.dateOfPassing):null),y=re(s.dateOfBirth),z=re(s.dateOfPassing),k=320,m=240,c=16,g=typeof window<"u"?window.innerWidth:1920,f=typeof window<"u"?window.innerHeight:1080;let p=b.x+c,i=b.y+c;p+k>g-c&&(p=b.x-k-c),p<c&&(p=c),i+m>f-c&&(i=b.y-m-c),i<c&&(i=c);const S=s.id===o;return h.jsxs("div",{className:q("fixed z-50","w-80","bg-card border-border text-card-foreground rounded-lg border-2 shadow-lg","animate-in fade-in-0 zoom-in-95 duration-200"),style:{left:`${p}px`,top:`${i}px`},children:[h.jsxs("div",{className:"border-border flex items-start gap-3 border-b p-4",children:[h.jsx(we,{mediaId:null,alt:`${s.firstName} ${s.lastName}`,fallbackInitials:`${s.firstName.charAt(0)}${s.lastName.charAt(0)}`,size:"lg",thumbnailPath:s.photoUrl,webpPath:s.photoUrl,filePath:s.photoUrl}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("h3",{className:"font-display text-foreground truncate text-lg leading-tight font-semibold",children:[s.firstName," ",s.lastName]}),j&&!S&&h.jsx("p",{className:"text-muted-foreground text-sm",children:j}),S&&h.jsx("p",{className:"text-primary text-sm font-medium",children:"Root Person"})]})]}),h.jsxs("div",{className:"space-y-2 p-4",children:[y&&h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"Born:"}),h.jsx("span",{className:"text-foreground flex-1 text-sm",children:y})]}),s.isLiving?h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"Age:"}),h.jsx("span",{className:"text-foreground flex-1 text-sm",children:O!==null?`${O} years`:"Unknown"})]}):z&&h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"Died:"}),h.jsxs("span",{className:"text-foreground flex-1 text-sm",children:[z,O!==null&&` (age ${O})`]})]}),s.gender&&h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"Gender:"}),h.jsx("span",{className:"text-foreground flex-1 text-sm capitalize",children:s.gender.toLowerCase()})]})]}),h.jsxs("div",{className:"border-border flex gap-2 border-t p-3",children:[h.jsx(te,{size:"sm",variant:"outline",onClick:()=>C(s.id),className:"flex-1",children:"View Profile"}),!S&&h.jsx(te,{size:"sm",variant:"default",onClick:()=>u(s.id),className:"flex-1",children:"Set as Center"})]})]})}export{ze as C};
